/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JDialog.java to edit this template
 */
package co.edu.unicolombo.s3.poo.inventory.library.Guis.Client;

import javax.swing.JOptionPane;

// import co.edu.unicolombo.s3.poo.inventory.library.Domain.Models.Client;
import co.edu.unicolombo.s3.poo.inventory.library.Infraestructure.Persistences.Entities.ClientEntity;
import co.edu.unicolombo.s3.poo.inventory.library.Service.Handlers.Commands.Client.CreateClientCommmands;

/**
 *
 * @author Juan
 */
public class CreateClient extends javax.swing.JDialog {

        private CreateClientCommmands createClientCommmands;
        private Runnable onClientCreate;

        /**
         * Creates new form CreateClient
         */
        public CreateClient(java.awt.Frame parent, boolean modal,
                        CreateClientCommmands createClientCommmands) {
                super(parent, modal);
                initComponents();
                this.createClientCommmands = createClientCommmands;
        }

        public void setOnClientCreate(Runnable onClientCreate) {
                this.onClientCreate = onClientCreate;
        }
        /**
         * This method is called from within the constructor to initialize the form.
         * WARNING: Do NOT modify this code. The content of this method is always
         * regenerated by the Form Editor.
         */
        @SuppressWarnings("unchecked")
        // <editor-fold defaultstate="collapsed" desc="Generated
        // Code">//GEN-BEGIN:initComponents
        private void initComponents() {

                jPanel1 = new javax.swing.JPanel();
                labelName = new javax.swing.JLabel();
                fieldName = new javax.swing.JTextField();
                labelAddress = new javax.swing.JLabel();
                fieldAddress = new javax.swing.JTextField();
                labelPhoneNumber = new javax.swing.JLabel();
                fieldPhoneNumber = new javax.swing.JTextField();
                buttonCreate = new javax.swing.JButton();
                jLabel1 = new javax.swing.JLabel();

                setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

                jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(
                                new javax.swing.border.LineBorder(new java.awt.Color(0, 153, 153), 4, true),
                                "Client data"));

                labelName.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
                labelName.setText("Name:");

                labelAddress.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
                labelAddress.setText("Address:");

                labelPhoneNumber.setFont(new java.awt.Font("Arial", 0, 18)); // NOI18N
                labelPhoneNumber.setText("Phone Number:");

                buttonCreate.setBackground(new java.awt.Color(0, 153, 153));
                buttonCreate.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
                buttonCreate.setText("Create");
                buttonCreate.addActionListener(new java.awt.event.ActionListener() {
                        public void actionPerformed(java.awt.event.ActionEvent evt) {
                                buttonCreateActionPerformed(evt);
                        }
                });

                javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
                jPanel1.setLayout(jPanel1Layout);
                jPanel1Layout.setHorizontalGroup(
                                jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(jPanel1Layout.createSequentialGroup()
                                                                .addGap(40, 40, 40)
                                                                .addGroup(jPanel1Layout.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                .addComponent(labelName,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                62,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                .addComponent(labelAddress,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                74,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                .addComponent(labelPhoneNumber))
                                                                .addGap(20, 20, 20)
                                                                .addGroup(jPanel1Layout
                                                                                .createParallelGroup(
                                                                                                javax.swing.GroupLayout.Alignment.LEADING,
                                                                                                false)
                                                                                .addComponent(fieldAddress,
                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                205,
                                                                                                Short.MAX_VALUE)
                                                                                .addComponent(fieldName)
                                                                                .addComponent(fieldPhoneNumber))
                                                                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                Short.MAX_VALUE))
                                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout
                                                                .createSequentialGroup()
                                                                .addContainerGap(165, Short.MAX_VALUE)
                                                                .addComponent(buttonCreate,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                153,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                .addGap(142, 142, 142)));
                jPanel1Layout.setVerticalGroup(
                                jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(jPanel1Layout.createSequentialGroup()
                                                                .addGap(35, 35, 35)
                                                                .addGroup(jPanel1Layout.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.BASELINE)
                                                                                .addComponent(labelName,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                37,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                .addComponent(fieldName,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                37,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                .addGap(32, 32, 32)
                                                                .addGroup(jPanel1Layout.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.BASELINE)
                                                                                .addComponent(labelAddress,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                26,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                .addComponent(fieldAddress,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                33,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                .addGap(33, 33, 33)
                                                                .addGroup(jPanel1Layout.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.BASELINE)
                                                                                .addComponent(labelPhoneNumber)
                                                                                .addComponent(fieldPhoneNumber,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                31,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                .addPreferredGap(
                                                                                javax.swing.LayoutStyle.ComponentPlacement.RELATED,
                                                                                99,
                                                                                Short.MAX_VALUE)
                                                                .addComponent(buttonCreate,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                37,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                .addGap(19, 19, 19)));

                jLabel1.setFont(new java.awt.Font("Arial", 1, 24)); // NOI18N
                jLabel1.setText("CREATE CLIENT");

                javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
                getContentPane().setLayout(layout);
                layout.setHorizontalGroup(
                                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout
                                                                .createSequentialGroup()
                                                                .addContainerGap(40, Short.MAX_VALUE)
                                                                .addComponent(jPanel1,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                .addGap(33, 33, 33))
                                                .addGroup(layout.createSequentialGroup()
                                                                .addGap(173, 173, 173)
                                                                .addComponent(jLabel1,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                200,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                Short.MAX_VALUE)));
                layout.setVerticalGroup(
                                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(layout.createSequentialGroup()
                                                                .addGap(10, 10, 10)
                                                                .addComponent(jLabel1)
                                                                .addPreferredGap(
                                                                                javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                                .addComponent(jPanel1,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                .addContainerGap(14, Short.MAX_VALUE)));

                pack();
        }// </editor-fold>//GEN-END:initComponents

        private void buttonCreateActionPerformed(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_buttonCreateActionPerformed
                var name = fieldName.getText();
                var address = fieldAddress.getText();
                var phoneNumber = fieldPhoneNumber.getText();

                if (name.isEmpty() || address.isEmpty() || phoneNumber.isEmpty()) {
                        JOptionPane.showMessageDialog(this, "Please complete all fields");
                        return;
                }

                var client = new ClientEntity(name, address, phoneNumber);
                try {
                        createClientCommmands.createClient(client);
                } catch (Exception e) {
                        javax.swing.JOptionPane.showMessageDialog(this, "Can not create client");
                }

                javax.swing.JOptionPane.showMessageDialog(this, "The client has been successfully created");
                if (onClientCreate != null) {
                        onClientCreate.run();
                }
                this.dispose();
        }// GEN-LAST:event_buttonCreateActionPerformed

        /**
         * @param args the command line arguments
         */
   

        // Variables declaration - do not modify//GEN-BEGIN:variables
        private javax.swing.JButton buttonCreate;
        private javax.swing.JTextField fieldAddress;
        private javax.swing.JTextField fieldName;
        private javax.swing.JTextField fieldPhoneNumber;
        private javax.swing.JLabel jLabel1;
        private javax.swing.JPanel jPanel1;
        private javax.swing.JLabel labelAddress;
        private javax.swing.JLabel labelName;
        private javax.swing.JLabel labelPhoneNumber;
        // End of variables declaration//GEN-END:variables
}
